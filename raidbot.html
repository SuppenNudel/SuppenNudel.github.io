<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Bootstrap stuff -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

    <title>How to use Raid-Helper</title>
  </head>
<body style="background-color: black; color: gray">

<div class="container">
  <!-- Table of contents -->
  <h1>Content</h1>
  <ol>
    <li><a href="#PARTICIPATION">Raid participation</a>
      <ol>
        <li><a href="#JOIN">Join a raid</a></li>
      </ol>
    </li>
    <li><a href="#LEADER">Raid leading</a>
      <ol>
        <li><a href="#CREATE">Create a run</a></li>
      <li><a href="#DELETE">Delete a run</a></li>
      <li><a href="#REMINDER">Post reminder</a></li>
        <li><a href="#EDIT">Edit a run</a></li>
      <li><a href="#GENERATOR">Raid command generator</a></li>
      </ol>
    </li>
    <li><a href="#CREDITS">Credits</a></li>
  </ol>

  <!-- Stuff for people signing up to raids -->
  <h1><a id="PARTICIPATION"></a># Raid participation commands #</h1>
  <img src="images/example-event.png"/>
  <br><br>

  <h2><a id="JOIN"></a>Join a raid</h2>
  <ol>
    <li>Click on the appropriate role you want to play as (first 5 emotes)</li>
    <img src="images/emotes-role.png"/>
    <li>Bot will ask you via DM which class you want to play - answer with the number (1-18)</li>
    <img src="images/role-signup.png"/>
    <li>Please do not sign up to roles which are already full. If the raid is already full (10 people), then you will be added as Backup.</li>
  </ol>
  <h2>Backup</h2>
  <ol>
    <li>Click the bench symbol</li>
  </ol>

  <!-- Stuff for people posting raids -->
  <h1><a id="LEADER"></a># Raid leader commands #</h1>

  <p style="color:red;">Note that you need the "Raid Leaders" role on discord for this to work.</p>

  <h2><a id="CREATE"></a>Create a run</h2>
  <ol>
    <li>Generate the command for your run (use the generator <a href="#GENERATOR">below</a>)</li>
    <li>Copy the generated text, and paste it in the 'bots' channel</li>
    <li>The bot will now create a post in the specified channel</li>
  </ol>

  <h2><a id="DELETE"></a>Delete a run</h2>
  <ol>
    <li>Just delete the post generated by the bot</li>
  </ol>

  <h2><a id="REMINDER"></a>Ping all people who signed up (will send a DM to those people)</h2>
  Use this command:
  <div class="input-group mb-3">
    <input type="text" class="form-control" value="?signed [MSGID] message [your text here]" id="command-ping-signed" aria-label="Recipient's username" aria-describedby="button-addon2" readonly>
    <div class="input-group-append">
      <button class="btn btn-outline-secondary" type="button" onclick="copyToClipboard('command-ping-signed')" style="background-color: #e9ecef;">Copy to clipboard</button>
    </div>
  </div>

  Replace [MSGID] with the number in the top right of the raid post.<br>
  Example:<br>
  <pre style="color: gray;">?signed 7870865576576 message Hi all, W3 starts in 30 minutes, be ready.</pre>
  => Will send every person who signed up on the post a DM with the text "Hi all, W3 starts in 30 minutes, be ready."

  <br><br>
  <h2><a id="EDIT"></a>Edit existing run</h2>
  Use this command:
  <div class="input-group mb-3">
    <input type="text" class="form-control" value="?editEvent [MSGID]" id="command-edit-event" aria-label="Recipient's username" aria-describedby="button-addon2" readonly>
    <div class="input-group-append">
      <button class="btn btn-outline-secondary" type="button" onclick="copyToClipboard('command-edit-event')" style="background-color: #e9ecef;">Copy to clipboard</button>
    </div>
  </div>

  Replace [MSGID] with the number in the top right of the raid post.<br>
  Bot will DM you.

  <br><br>
  <h2><a id="GENERATOR"></a>Raid command generator</h2>

  <form onSubmit="return GenerateRaidCommand()">
    <div class="form-group">
      <label for="raidTitle">Raid title (Wing):</label>
      <input type="text" class="form-control" id="raidTitle" name="raidTitle" required placeholder="Title">
      <br>
      
      <label for="raidDesc">Raid description (includes roles)(max. 500 characters):</label>
      <textarea id="raidDesc" maxlength="500" class="form-control" name="raidDesc" required placeholder="Description + Roles" rows="8" cols="40"></textarea>
      <br>
      
      <label for="raidChannel">Discord channel to post raid in (without #):</label>
      <input type="text" class="form-control" id="raidChannel" name="raidChannel" required placeholder="Channel name">
      <br>
      
      <label for="raidDate">Raid date:</label>
      <input type="date" class="form-control" id="raidDate" name="raidDate" required placeholder="DD-MM-YYYY">
      <br>
      
      <label for="raidTime">Raid time (in ServerTime)</label>
      <input type="time" class="form-control" id="raidTime" name="raidTime" required placeholder="HH:mm">
      <br>

      <button type="submit" class="btn btn-primary">Generate raid command</button>
      <button type="button" onclick="copyToClipboard('commandOutput')" class="btn btn-secondary">Copy to clipboard</button>
    </div>
  </form>
  <textarea id="commandOutput" placeholder="Copy the generator output into the BOTS channel in discord to post a run" cols="80" rows="5"></textarea>
</div>

<footer class="footer mt-auto py-3">
  <div class="container">
    <span class="text-muted">
      <!-- Credits -->
      <h2>Credits</h2>
      Bot is <a href="https://raid-helper.com/index">Raid-Helper</a>.<br>
      Discovered and made to work by Ced (Nudelforce).<br>
      Integrated in Wipe Discord by Ced and Linden, with support from Lee. If something breaks, ping them.
    </span>
  </div>
</footer>

<script>
  function copyToClipboard(elementId) {
    /* Get the text field */
    var copyText = document.getElementById(elementId);

    /* Select the text field */
    copyText.select();
    copyText.setSelectionRange(0, 99999); /*For mobile devices*/

    /* Copy the text inside the text field */
    document.execCommand("copy");

    /* Alert the copied text */
    alert("Copied to clipboard");
  }

  function GenerateRaidCommand() {
    var command     = "?quickCreate event";
    var title       = "[" + document.getElementById("raidTitle").value + "]";
    var description = "[" + document.getElementById("raidDesc").value + "]";
    var channel     = "[" + document.getElementById("raidChannel").value + "]";
    
    // Input type=date always returns it as yyyy-MM-dd, but bot needs it to be dd-MM-yyyy, so flip it
    var date        = document.getElementById("raidDate").value;
    date = date.split("-").reverse().join("-");
    date = "[" + date + "]";
    
    var time        = "[" + document.getElementById("raidTime").value + "]";

    // Additional parameters - should always be the same
    var fixedStuff="[11][# Deadline - ( 0 ) - deadline in hours before the event.# Sign-Ups overall - (10) - between 1 and 100. # Sign-Ups lock - ( true ) - lock Sign-Ups at the set maximum.# Sign-Ups user - ( 1 ) - between 1 and 10.# Mention - (everyone) - role name to be pinged.# Attendance - ( true ) - attendance tracking.# Numbering -  ( true ) - display Sign-Up order.# Rename - ( Late ) # (Backup) # ( <unused> )  # (Cancel ) #  ( Yes )  - rename the default roles.# Announcement - ( false ) - sends an announcement message to the specified channel.# ( channel ) # ( 0 ) # ( message ) - specify the channel - signed/unsigned also works -, offset in minutes and the message to be sent.# Opt-out -  ( none )  - message id of event with players to be added on creation.]";
    
    var fullText = command + title + description + channel + date + time + fixedStuff;

    document.getElementById("commandOutput").innerHTML = fullText;
    
    return false; // Always return false, to prevent the submit from going through => prevents page reload
  }
</script>

<!-- jQuery stuff -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

</body>
</html>
